(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{334:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("@[toc]")]),t._v(" "),s("h2",{attrs:{id:"概要"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[t._v("#")]),t._v(" 概要")]),t._v(" "),s("p",[t._v("关于前端的网络攻击，有以下两种是最为常见的")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Cross-site scripting：跨站脚本攻击")])]),t._v(" "),s("li",[s("p",[t._v("跨站请求伪造（CSRF）")])])]),t._v(" "),s("p",[t._v("下面分别介绍两种攻击方式")]),t._v(" "),s("h2",{attrs:{id:"xss-cross-site-scripting-跨站脚本攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xss-cross-site-scripting-跨站脚本攻击"}},[t._v("#")]),t._v(" XSS(Cross-site scripting：跨站脚本攻击）")]),t._v(" "),s("p",[t._v("跨站脚本攻击是一种"),s("code",[t._v("安全漏洞")]),t._v("，攻击者可以利用漏洞，向网站"),s("code",[t._v("注入恶意的客户端代码")]),t._v("。")]),t._v(" "),s("p",[t._v("如果受害者在没有察觉中"),s("code",[t._v("运行")]),t._v("这些恶意代码，攻击者就可以"),s("code",[t._v("突破网站的访问限制")]),t._v("，以受害者身份，"),s("code",[t._v("去操作网站上任何可执行的操作")]),t._v("，或者"),s("code",[t._v("读取受害者在目标网站上的个人信息")]),t._v("、cookie、session tokens 等网站验证信息。")]),t._v(" "),s("p",[t._v("XSS 攻击有三种类型，分别如下：")]),t._v(" "),s("h3",{attrs:{id:"存储型-xss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#存储型-xss"}},[t._v("#")]),t._v(" 存储型 XSS")]),t._v(" "),s("p",[t._v("存储型XSS，攻击者"),s("code",[t._v("提交了带有恶意脚本")]),t._v("的内容到服务器，这个内容"),s("code",[t._v("保存到数据库")]),t._v("。当其他用户访问这个网站后，内容被这些用户获取，"),s("code",[t._v("恶意代码便可以在这些用户客户端运行")]),t._v("，发起攻击。")]),t._v(" "),s("h3",{attrs:{id:"反射型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#反射型"}},[t._v("#")]),t._v(" 反射型")]),t._v(" "),s("p",[t._v("反射型也称为“"),s("code",[t._v("非持久型XSS")]),t._v("” ,它需要靠被攻击者服务器，将用户输入的数据"),s("code",[t._v("反射")]),t._v("回来给浏览器。")]),t._v(" "),s("p",[t._v("攻击者会"),s("code",[t._v("构造")]),t._v("一个包含恶意脚本的"),s("code",[t._v("URL")]),t._v("，并将此URL 发送给用户。当用户点击打开这个URL 时，服务器会将有恶意代码的内容"),s("code",[t._v("返回到浏览器并运行")]),t._v("，达到攻击目标。")]),t._v(" "),s("p",[t._v("这种方式"),s("code",[t._v("不将恶意脚本存储在被攻击的服务器")]),t._v("，而是拼接在URL中，并最后随着操作结果返回到受害者浏览器。通过"),s("code",[t._v("欺骗浏览器信任此恶意脚本")]),t._v("，执行窃取个人身份信息如cookie 等"),s("code",[t._v("发送到攻击者的服务器")]),t._v("。")]),t._v(" "),s("p",[t._v("举例来说，如果一个用户在登录某个Web应用程序后获得了一个cookie，攻击者可以将含有恶意代码的URL发送给用户。")]),t._v(" "),s("p",[t._v("当用户打开这个URL时，Web服务器会执行该URL中的请求，并将恶意代码以请求结果返回给用户浏览器，浏览器执行URL中包含的JavaScript代码。这样，攻击者就可以利用这段恶意代码将用户的cookie信息发送到他们控制的服务器上，进而实现非法登录等恶意行为。")]),t._v(" "),s("h3",{attrs:{id:"xss代码例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xss代码例子"}},[t._v("#")]),t._v(" XSS代码例子")]),t._v(" "),s("p",[t._v("下面的地址中，欢迎XXX 是根据URL 的参数name 的值来确定的，是一个动态内容。当我们改变name的值的时候，HTML 显示的值也会变成name对的值。\n"),s("img",{attrs:{src:"https://img-blog.csdnimg.cn/direct/41d5bd402a74481f85cebf96b3a38f1d.png",alt:"在这里插入图片描述"}})]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token doctype"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),s("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--STATUS OK--\x3e")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("content-type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/html;charset=utf-8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\nwindow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("alert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这里是显示一条指定消息和一个确认按钮的警告框")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("     \n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("confirm")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"完成的不错！"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//指定消息完成得不错!")]),t._v("\n window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"level2.php?keyword=test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//刷新当前页面，并且重定向到level2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("欢迎来到level1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("align")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("center")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("欢迎来到level1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("align")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("center")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("欢迎用户test"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("center")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("level1.png")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("center")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("align")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("center")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("payload的长度:4"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("p",[t._v("上面代码中，我把URL 地址改成"),s("code",[t._v("https://xssaq.com/yx/level1.php?name=<script>alert()<\/script>")]),t._v("\n就是执行"),s("code",[t._v("alert()")]),t._v(" 函数，实现攻击目标。因为后端没有过滤掉这些恶意代码，直接将这些动态内容传给前端，便会把"),s("script",[t._v("alert()")]),t._v("当做普通函数执行。")]),t._v(" "),s("p",[t._v("效果如图所示，成功执行了alert 函数。\n"),s("img",{attrs:{src:"https://img-blog.csdnimg.cn/direct/a47423557f0248f2addb7e54a6fa7eb0.png",alt:"在这里插入图片描述"}})]),t._v(" "),s("h3",{attrs:{id:"容易发生xss攻击的情形"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容易发生xss攻击的情形"}},[t._v("#")]),t._v(" 容易发生XSS攻击的情形")]),t._v(" "),s("p",[t._v("下面的两种情况，容易发生XSS攻击：")]),t._v(" "),s("ol",[s("li",[t._v("没有过滤掉恶意代码的动态内容，被发送给其他用户")]),t._v(" "),s("li",[t._v("数据从一个不可靠的链接进入一个Web应用程序")])]),t._v(" "),s("h3",{attrs:{id:"基于dom的xss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于dom的xss"}},[t._v("#")]),t._v(" 基于DOM的XSS")]),t._v(" "),s("p",[t._v("DOM型攻击，是将恶意脚本注入到被攻击的应用程序的DOM 结构中，而不需要存储到被攻击者服务器，通过修改原DOM 而达到攻击目的。")]),t._v(" "),s("h2",{attrs:{id:"跨站请求伪造-csrf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跨站请求伪造-csrf"}},[t._v("#")]),t._v(" 跨站请求伪造（CSRF）")]),t._v(" "),s("p",[t._v("跨站伪造请求，Cross-site request forgery，也称为 XSRF，是一种冒充受信任用户，向服务器发送非预期请求的攻击方式。")]),t._v(" "),s("p",[t._v("例如，这些非预期的请求，可能是通过URL 链接加入恶意参数来达到攻击目标，如下面的图片的src参数")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://www.example.com/index.php?action=delete&id=123"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("对于"),s("code",[t._v("https://www.example.com")]),t._v(" 有权限的用户来说，这个"),s("img"),t._v("标签会在他们不注意的时候下对"),s("code",[t._v("https://www.example.com/index.php")]),t._v(" 服务器发送请求，来达到攻击者的目的。")]),t._v(" "),s("p",[t._v("这个图片可能不在https://www.example.com站内，因为用户登录了https://www.example.com后，会保留一些个人信息，攻击者"),s("code",[t._v("可能通过诱导受害者进入有恶意链接图片")]),t._v("，从而执行"),s("code",[t._v("https://www.example.com/index.php?action=delete&id=123")]),t._v("请求，并携带了用户在"),s("code",[t._v("https://www.example.com")]),t._v("的登录信息，造成服务器以为是受害者自己发起的，从而"),s("code",[t._v("伪造")]),t._v("了受害者的请求。")]),t._v(" "),s("h2",{attrs:{id:"防御措施"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#防御措施"}},[t._v("#")]),t._v(" 防御措施")]),t._v(" "),s("h3",{attrs:{id:"对xss-攻击的防御方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对xss-攻击的防御方案"}},[t._v("#")]),t._v(" 对XSS 攻击的防御方案")]),t._v(" "),s("p",[t._v("根据XSS 攻击的发生原因，和类型，我们可以可以采取以下的防御措施")]),t._v(" "),s("h4",{attrs:{id:"对用户输入过滤和转义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对用户输入过滤和转义"}},[t._v("#")]),t._v(" 对用户输入过滤和转义")]),t._v(" "),s("p",[t._v("对所有用户的输入的数据进行严格的过滤、移除或转义可能导致脚本执行的字符或字符串，例如特殊字符“>” 、“<”、“&” 等")]),t._v(" "),s("h4",{attrs:{id:"使用http-only-cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用http-only-cookie"}},[t._v("#")]),t._v(" 使用HTTP Only Cookie")]),t._v(" "),s("p",[t._v("将敏感信息（会话标志）存储在HttpOnly 的Cookie 中，这样，即使有恶意脚本，也无法直接执行获取Cookie 的操作。")]),t._v(" "),s("h4",{attrs:{id:"使用content-security-policy-csp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用content-security-policy-csp"}},[t._v("#")]),t._v(" 使用Content Security Policy（CSP）")]),t._v(" "),s("p",[t._v("CSP 可以限制浏览器"),s("code",[t._v("只加载和执行特定来源的脚本")]),t._v("，从而防止恶意脚本的执行")]),t._v(" "),s("h4",{attrs:{id:"对用户权限进行严格控制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对用户权限进行严格控制"}},[t._v("#")]),t._v(" 对用户权限进行严格控制")]),t._v(" "),s("p",[t._v("根据用户的角色和权限，限制他们可以访问和操作的资源，从而降低XSS攻击的影响范围。")]),t._v(" "),s("h3",{attrs:{id:"对csrf-跨站伪造请求-防御方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对csrf-跨站伪造请求-防御方案"}},[t._v("#")]),t._v(" 对CSRF（跨站伪造请求）防御方案")]),t._v(" "),s("p",[t._v("对于CSRF，我们需要加强请求的验证，可以采取以下的方案")]),t._v(" "),s("h4",{attrs:{id:"验证-http-referer字段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证-http-referer字段"}},[t._v("#")]),t._v(" 验证 HTTP Referer字段")]),t._v(" "),s("p",[t._v("检查HTTP请求头中的"),s("code",[t._v("Referer")]),t._v("字段，确保请求是从"),s("code",[t._v("合法的源发起的")]),t._v("。这样就避免受害者从其他"),s("code",[t._v("被攻击者诱导进入的网站中")]),t._v("，无疑发起非预期的请求。因为 Referer 字段会记录发起"),s("code",[t._v("请求来源于哪个URL地址")]),t._v("，如果这个Referer 字段与自己的网站不一致，基本可以判断为第三方不被信任。")]),t._v(" "),s("h3",{attrs:{id:"使用token验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用token验证"}},[t._v("#")]),t._v(" 使用Token验证")]),t._v(" "),s("p",[t._v("在表单中添加一个"),s("code",[t._v("随机生成的令牌")]),t._v("，服务器验证该令牌以确保请求是合法的。")]),t._v(" "),s("h3",{attrs:{id:"使用验证码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用验证码"}},[t._v("#")]),t._v(" 使用验证码")]),t._v(" "),s("p",[t._v("在敏感操作中使用验证码，以防止自动化攻击。")]),t._v(" "),s("h2",{attrs:{id:"小结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),s("ul",[s("li",[t._v("跨站脚本攻击，有三种类型，存储型、反射型、基于DOM型")]),t._v(" "),s("li",[t._v("跨站脚本攻击需要执行特定恶意脚本，因此，可以在用户输入上做严格过滤和转义特殊字符，可以使得其不生效，同时使用CSP限制脚本加载规则和HttpOnly的cookie")]),t._v(" "),s("li",[t._v("跨站伪造请求，要加强请求验证，可以检测Referer字段、加token 或者验证码进行增强")])])])}),[],!1,null,null,null);s.default=e.exports}}]);