(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{373:function(s,n,e){"use strict";e.r(n);var a=e(14),t=Object(a.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[n("strong",[s._v("公众号开发的重要性")]),s._v("\n第一：公众号可以绑定多个小程序，功能强大。\n很多的时候，我们开发好了小程序。但我们得考虑一个问题是，如何才能实现新用户不断增加，老用户不放弃。我觉得留着用户比增加用户需要的成本更低。微信公众号可以实现多个小程序绑定。还可以定期发送消息，只要用户没有取消关注，都会收到消息。这就具有比单个小程序更有强的吸附力。好了，公众号的功能不止这些。那么，现在我有一个需求，不同的用户推送不同的消息，这个可以实现吗？")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("答案是肯定可以的。和微信小程序一样。每个微信用户登录公众号首先都会经过询问是否授权给这个平台，我们一般都点击授权的按钮。那么，这个用处是什么呢？他可以对不同的用户生成一个openid。这个openid和小程序的openid不一样。比如，一个公众号绑定了多个小程序。这些小程序同一个用户登录，openid都是不同的，也就是说，每一个小程序，同一个用户，都有一个openid。但是，在同一个公众号平台下，公众号的openid只有一个。\n")])])]),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190719200320770.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzAxMTE4NQ==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("现在要做一个功能，向不同的用户发送不同的信息，这个时候怎么办呢？是不是需要标识不同的用户才能发送不同的消息啊，对的。我们需要获取公众号用户的唯一标识：openid。这个时候，我们需要在公众号设置中，配置服务器了。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190719201202704.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzAxMTE4NQ==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),n("p",[s._v("参考微信小程序获取open id的步骤。我们一样需要在服务器部署响应请求的网页。这个我使用php_wx.php网页响应请求。其中"),n("strong",[s._v("https://域名/wx.php")]),s._v("就是服务器地址选项要填写的内容。\n还有token是自己定的，这个token要和服务器的wx.ph里面的token一致，用于检验身份。")]),s._v(" "),n("p",[s._v("消息加密密钥是系统生成，无需操作。加密的方式可以选择不同的方式，建议部署的时候，为了减少操作，明文即可，后期熟悉之后再配置为加密方式。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<?php\n\ntraceHttp();\n\ndefine("TOKEN", "公众号token令牌");\n$wechatObj = new wechatCallbackapiTest();\nif (isset($_GET[\'echostr\'])) {\n    $wechatObj->valid();\n}else{\n    $wechatObj->responseMsg();\n}\n\nclass wechatCallbackapiTest\n{\n    public function valid()\n    {\n        $echoStr = $_GET["echostr"];\n        if($this->checkSignature()){\n            echo $echoStr;\n            exit;\n        }\n    }\n\n    private function checkSignature()\n    {\n        $signature = $_GET["signature"];\n        $timestamp = $_GET["timestamp"];\n        $nonce = $_GET["nonce"];\n\n        $token = TOKEN;\n        $tmpArr = array($token, $timestamp, $nonce);\n        sort($tmpArr);\n        $tmpStr = implode( $tmpArr );\n        $tmpStr = sha1( $tmpStr );\n\n        if( $tmpStr == $signature ){\n            return true;\n        }else{\n            return false;\n        }\n    }\n\n    public function responseMsg()\n    {\n        $postStr = $GLOBALS["HTTP_RAW_POST_DATA"];\n\n        if (!empty($postStr)){\n            $postObj = simplexml_load_string($postStr, \'SimpleXMLElement\', LIBXML_NOCDATA);\n            $fromUsername = $postObj->FromUserName;\n            $toUsername = $postObj->ToUserName;\n            $keyword = trim($postObj->Content);\n            $time = time();\n            $textTpl = "<xml>\n                        <ToUserName><![CDATA[%s]]></ToUserName>\n                        <FromUserName><![CDATA[%s]]></FromUserName>\n                        <CreateTime>%s</CreateTime>\n                        <MsgType><![CDATA[%s]]></MsgType>\n                        <Content><![CDATA[%s]]></Content>\n                        <FuncFlag>0</FuncFlag>\n                        </xml>";\n            if($keyword == "?" || $keyword == "？")\n\n\n            {\n\t\t$url=urlencode("http://域名/callback.php");\n                $msgType = "text";\n\t\t$my=\'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx0f5ef167a14f12f2&redirect_uri=\'.$url.\'&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect\';\n          \n//date("Y-m-d H:i:s",time();\n                $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $my);\n\n               echo $resultStr;\n            }\n        }else{\n            echo "";\n            exit;\n        }\n    }\n}\n\nfunction traceHttp()\n{\n    logger("\\n\\nREMOTE_ADDR:".$_SERVER["REMOTE_ADDR"].(strstr($_SERVER["REMOTE_ADDR"],\'101.226\')? " FROM WeiXin": "Unknown IP"));\n    logger("QUERY_STRING:".$_SERVER["QUERY_STRING"]);\n}\nfunction logger($log_content)\n{\n    if(isset($_SERVER[\'HTTP_APPNAME\'])){   //SAE\n        sae_set_display_errors(false);\n        sae_debug($log_content);\n        sae_set_display_errors(true);\n    }else{ //LOCAL\n        $max_size = 500000;\n        $log_filename = "log.xml";\n        if(file_exists($log_filename) and (abs(filesize($log_filename)) > $max_size)){unlink($log_filename);}\n        file_put_contents($log_filename, date(\'Y-m-d H:i:s\').$log_content."\\r\\n", FILE_APPEND);\n    }\n}\n?>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br")])]),n("p",[s._v("这段代码实现的功能是，验证公众号号的token令牌，也就是php代码中的define一个“TOKEN” 这个值一定要和公众号号的token一致，否则无法通过验证。那么是通过那个方法验证的呢？php中是利用 **$this->checkSignature()**方法进行验证。")]),s._v(" "),n("p",[s._v("解释一下")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(' private function checkSignature()\n    {\n        $signature = $_GET["signature"];\n        $timestamp = $_GET["timestamp"];\n        $nonce = $_GET["nonce"];\n//通过获取请求的信息，获取微信服务器传递过来的signature值。这个值里面包含token令牌的值。\n\n        $token = TOKEN;\n //把自己服务器的token赋值给token变量\n        $tmpArr = array($token, $timestamp, $nonce);\n        sort($tmpArr);\n        $tmpStr = implode( $tmpArr );\n        $tmpStr = sha1( $tmpStr );\n//将token变量和timetamp、nonce整合在tmpStr中，用这个和singnature进行对比\n        if( $tmpStr == $signature ){\n            return true;\n         //如果完全一致，说明，这个服务器和微信公众号要配置的服务器是同一个，返回TRUE，验证通过\n        }else{\n            return false;\n        }\n    }\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("其他那个  $wechatObj->responseMsg();方法")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('public function responseMsg()\n    {\n        $postStr = $GLOBALS["HTTP_RAW_POST_DATA"];\n\n        if (!empty($postStr)){\n            $postObj = simplexml_load_string($postStr, \'SimpleXMLElement\', LIBXML_NOCDATA);\n            $fromUsername = $postObj->FromUserName;\n            $toUsername = $postObj->ToUserName;\n            $keyword = trim($postObj->Content);\n            $time = time();\n            $textTpl = "<xml>\n                        <ToUserName><![CDATA[%s]]></ToUserName>\n                        <FromUserName><![CDATA[%s]]></FromUserName>\n                        <CreateTime>%s</CreateTime>\n                        <MsgType><![CDATA[%s]]></MsgType>\n                        <Content><![CDATA[%s]]></Content>\n                        <FuncFlag>0</FuncFlag>\n                        </xml>";\n            if($keyword == "?" || $keyword == "？")\n\n\n            {\n\t\t$url=urlencode("http://域名/callback.php");\n                $msgType = "text";\n\t\t$my=\'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx0f5ef167a14f12f2&redirect_uri=\'.$url.\'&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect\';\n          \n//date("Y-m-d H:i:s",time();\n                $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $my);\n\n               echo $resultStr;\n            }\n        }else{\n            echo "";\n            exit;\n        }\n    }\n}\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("p",[s._v("用于用户和公众号的对话，也就是关键字回复功能。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("  $resultStr = sprintf($textTpl, $fromUsername, $toUsername, $time, $msgType, $my);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这段代码将这个字符串，整合到result变量中，当用户回复“？”时候，会echo一句话，这句话的内容就是$my变量的内容。")]),s._v(" "),n("p",[s._v("按照这个逻辑。我们可以向用户发送一个请求地址。这个请求地址是用于获取code。在callback.php中，我们需要利用code,appid ,secret的值换取用户的信息包括openid。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\t\t$my='https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx0f5ef167a14f12f2&redirect_uri='.$url.'&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect';\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<?php\n//this to get weixingonzhonhao openid\n$appid='自己公众号的APPID';\n\n$secret='自己公众号secret';\n$code = $_GET[\"code\"]; \n//获取微信服务器传递的code\n$get_token_url = 'https://api.weixin.qq.com/sns/oauth2/access_token?appid='.$appid.'&secret='.$secret.'&code='.$code.'&grant_type=authorization_code';\n$ch = curl_init();\n//请求获取openid\ncurl_setopt($ch,CURLOPT_URL,$get_token_url); \ncurl_setopt($ch,CURLOPT_HEADER,0); \ncurl_setopt($ch,CURLOPT_SSL_VERIFYPEER,FALSH); \ncurl_setopt($ch,CURLOPT_SSL_VERIFYHOST,FALSH); \ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1 ); \n//curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10); \n$res = curl_exec($ch); \n//将获取到的数据装到res变量\nif(curl_errno($ch)){\n\necho 'error'.curl_error($ch);\n\n}\ncurl_close($ch);\n//将res变量转成json格式\n$json_obj = json_decode($res,true); \n//根据openid和access_token查询用户信息 \n$access_token = $json_obj['access_token']; \n\n//得到openid\n$openid=$json_obj['openid']; \n\n\n\n//getuninid\n\n$get_unionid_url='https://api.weixin.qq.com/cgi-bin/user/info?access_token='.$access_token.'&openid='.$openid.'&lang=zh_CN';\n\n//利用openid获取unionid用户唯一标识\n$ch2 = curl_init();\ncurl_setopt($ch2,CURLOPT_URL,$get_unionid_url); \ncurl_setopt($ch2,CURLOPT_SSL_VERIFYPEER,FALSH); \ncurl_setopt($ch2,CURLOPT_SSL_VERIFYHOST,FALSH); \ncurl_setopt($ch2, CURLOPT_RETURNTRANSFER, 1 ); \n\n$data = curl_exec($ch2); \n\nif(curl_errno($ch2)){\n\necho 'error'.curl_error($ch2);\n\n}\n\ncurl_close($ch2); \n$unioniddata = json_decode($data,true); \n\n$unionid =$unioniddata['unionid']; \n\necho\"weixinvopenid  \".$openid;\n\necho$code;\n\necho\"3333\".$data;\necho$unioniddata['openid'];\n?>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);